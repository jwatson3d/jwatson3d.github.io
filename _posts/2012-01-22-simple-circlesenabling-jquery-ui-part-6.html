---
title: Simple Circles–Enabling jQuery UI (Part 6)
date: '2012-01-22T10:50:00.000-05:00'
author: John Watson
classes: wide
excerpt: I think of the default blue MVC 3 UI as something of a developer’s test version – not really what you’ll go to production with but sufficient to work with while developing. It’s possible to use the ASP.NET MVC themes from their gallery but I think jQuery and its companion jQuery UI provide a much richer and cross-browser solution with far less effort...
tags:
- MVC
- Tutorial
- ASP.NET 4.0
- jQuery
- jQueryUI
- OSS
modified_time: '2012-01-22T11:01:55.366-05:00'
thumbnail: http://lh4.ggpht.com/-_yVTJr0fsUM/Txwk7h6F8HI/AAAAAAAAAuQ/q9oSiJNUZfA/s72-c/Simple-Circles---Enable-jQuery-UI_th.png?imgmax=800
blogger_id: tag:blogger.com,1999:blog-2811308028656623966.post-4009111868300011441
blogger_orig_url: http://pragmatic-software.blogspot.com/2012/01/simple-circlesenabling-jquery-ui-part-6.html
---

<div dir="ltr" style="text-align: left;" trbidi="on">This post is part of a <a href="http://pragmatic-software.blogspot.com/2012/01/simple-circlesintroduction.html">series</a> on building a simple to use web-based contact and customer relationship management application. The goal is to support various audiences including businesses, teams, clubs, religious organizations, etc.<br />I think of the default blue MVC 3 UI as something of a developer’s test version – not really what you’ll go to production with but sufficient to work with while developing. It’s possible to use the ASP.NET MVC themes from their gallery but I think jQuery and its companion jQuery UI provide a much richer and cross-browser solution with far less effort.<br /><h2>  Themes</h2>Steve Hobbs wrote a great <a href="http://stevescodingblog.co.uk/adding-a-new-jquery-ui-theme-to-the-default-asp-net-mvc-3-project/" target="_blank">step-by-step post</a> on enabling jQuery UI last June. Like him, I used the Redmond theme to start with so it more closely resembled the default.<br /><a href="http://lh6.ggpht.com/-0qpFGeMymeY/Txwk6zMuJdI/AAAAAAAAAuI/B0-RIpmHAL0/s1600-h/Simple-Circles---Enable-jQuery-UI3.png"><img align="right" alt="Simple Circles - Enable jQuery UI" border="0" height="69" src="http://lh4.ggpht.com/-_yVTJr0fsUM/Txwk7h6F8HI/AAAAAAAAAuQ/q9oSiJNUZfA/Simple-Circles---Enable-jQuery-UI_th.png?imgmax=800" style="background-image: none; border-bottom-width: 0px; border-left-width: 0px; border-right-width: 0px; border-top-width: 0px; display: inline; float: right; margin: 0px 0px 0px 2px; padding-left: 0px; padding-right: 0px; padding-top: 0px;" title="Simple Circles - Enable jQuery UI" width="213" /></a><a href="http://lh4.ggpht.com/-3_JD0No5bHI/Txwk7ssRvlI/AAAAAAAAAuY/R2p5Jygqi2U/s1600-h/Simple-Circles---jQuery-UI-theme3.png"><img align="left" alt="Simple Circles - jQuery UI theme" border="0" height="138" src="http://lh4.ggpht.com/-ERp5Nm_UNTs/Txwk79UkosI/AAAAAAAAAug/XiYW1fl1gjQ/Simple-Circles---jQuery-UI-theme_thu.png?imgmax=800" style="background-image: none; border-bottom-width: 0px; border-left-width: 0px; border-right-width: 0px; border-top-width: 0px; display: inline; float: left; margin: 0px 5px 0px 0px; padding-left: 0px; padding-right: 0px; padding-top: 0px;" title="Simple Circles - jQuery UI theme" width="142" /></a>After downloading the <a href="http://jqueryui.com/themeroller/" target="_blank">Redmond</a> theme, copy the <span style="font-family: 'Courier New';">css\redmond</span> folder to the <span style="font-family: 'Courier New';">Content\themes</span> folder under the Circles website. Remember to choose “Include in Project” from the Solution Explorer (see image to the left). As Steve Hobbs indicates, jQuery UI support is already included in the ASP.NET MVC 3 templates – it just needs to be enabled by adding two lines to the <span style="font-family: 'Courier New';">_Layout.cshtml</span> in the <span style="font-family: 'Courier New';">Shared</span> folder as shown on the right. To start taking advantage of the jQuery UI theme, simply add the appropriate styles to HTML elements. Here I’ve commented out the standard Submit button on the <span style="font-family: 'Courier New';">Create.cshtml</span> page and replaced it with one decorated with jQuery UI CSS classes:<br /><pre class="html" name="code">&lt;!--&lt;input type="submit" value="Create" /&gt;--&gt;<br />&lt;input type="submit" value="Create" <br />       class="ui-button ui-widget ui-state-default ui-corner-all" <br />       role="button" aria-disabled="false"&gt;</pre><br /><a href="http://lh5.ggpht.com/-UPg3mkTVYzg/Txwk8HlA0dI/AAAAAAAAAuo/6LAHYTb4KCM/s1600-h/Simple-Circles---jQuery-button3.png"><img align="right" alt="Simple Circles - jQuery button" border="0" height="109" src="http://lh5.ggpht.com/-4Cw5mqtIQ0E/Txwk8dmL77I/AAAAAAAAAuw/mU2ISkhIqcM/Simple-Circles---jQuery-button_thumb.png?imgmax=800" style="background-image: none; border-bottom-width: 0px; border-left-width: 0px; border-right-width: 0px; border-top-width: 0px; display: inline; float: right; padding-left: 0px; padding-right: 0px; padding-top: 0px;" title="Simple Circles - jQuery button" width="136" /></a>This screen shot shows the before and after using the Redmond theme just set up. These CSS classes are designed such that switching themes is as easy as deploying a different theme to the <span style="font-family: 'Courier New';">Content\themes</span> folder and changing the single &lt;link&gt; line in the <span style="font-family: 'Courier New';">_Layout.cshtml</span> page. The “eye candy” is nice – it looks fresher and more modern…well, months ahead of the default hard images the browser displays!<br /><br />Next I’m going to add some feedback for the user when an action completes. The default behavior when adding, updating or deleting an entity is to perform the action then return the user to the Index page. Breaking this down, it means the controller performs the action then uses <span style="font-family: 'Courier New';">RedirectToAction</span> to redirect the browser to the default HTTP GET action. Doing so ensures that the user can’t accidently use refresh to repeat the same action, e.g. adding the same entity twice or, classically, buying the same thing again.<br /><br />Because redirect is used the current HTTP request ends and another one initiates. This means the feedback message has to be passed <u>across</u> HTTP requests so the usual suspect –&nbsp;<span style="font-family: 'Courier New';"><a href="http://msdn.microsoft.com/en-us/library/ie/system.web.mvc.viewpage.viewdata.aspx" target="_blank">ViewData</a></span> – won’t work. The MVC engineers planned for this with another dictionary object that’s briefly stored in the user’s session – <a href="http://msdn.microsoft.com/en-us/library/ie/dd394711.aspx" target="_blank">TempData</a>. The MSDN article <a href="http://msdn.microsoft.com/en-us/library/ie/dd394711.aspx" target="_blank">Passing Data in an ASP.NET MVC Application</a> provides the necessary details. Here I tuck the confirmation message into <span style="font-family: 'Courier New',Courier,monospace;">TempData</span>&nbsp;(line #4) before issuing the redirect:<br /><pre class="c-sharp" name="code">  ...<br />  this.repository.Add(entity);<br /><br />  TempData["message"] = string.Format("{0} was added", entity.PartyName);<br /><br />  return RedirectToAction("Index");<br />}</pre><br />Back in the <span style="font-family: 'Courier New',Courier,monospace;">Index.cshtml</span> the message just passed to it is retrieved and rendered with jQuery UI classes decorating the output:<br /><pre class="html" name="code">&lt;h2&gt;People&lt;/h2&gt;<br /><br />@if (TempData["message"] != null) {<br />  &lt;div style="margin-top: 20px; padding: 0 .7em;" class="ui-state-highlight ui-corner-all"&gt; <br />    &lt;p&gt;&lt;span style="float: left; margin-right: .3em;" class="ui-icon ui-icon-info"&gt;&lt;/span&gt;<br />      @TempData["message"]<br />    &lt;/p&gt;<br />  &lt;/div&gt;<br />}</pre><br /><a href="http://lh4.ggpht.com/-SXGr8R71qBE/Txwk8hsRr7I/AAAAAAAAAu4/jnygKqhYKUM/s1600-h/Simple-Circles---Confirmation3.png"><img align="right" alt="Simple Circles - Confirmation" border="0" height="116" src="http://lh5.ggpht.com/-tQOSf8o-pZM/Txwk83aZX_I/AAAAAAAAAvA/DFYPs6ZkQyc/Simple-Circles---Confirmation_thumb1.png?imgmax=800" style="background-image: none; border-bottom-width: 0px; border-left-width: 0px; border-right-width: 0px; border-top-width: 0px; display: inline; float: right; padding-left: 0px; padding-right: 0px; padding-top: 0px;" title="Simple Circles - Confirmation" width="178" /></a>The result is shown to the right. Another simple feature to take advantage of jQuery’s client-side power is to enable “unobtrusive client-side validation”. There’s plenty of examples already, including the ASP.NET Teams’s own <a href="http://www.asp.net/mvc/tutorials/creating-a-mvc-3-application-with-razor-and-unobtrusive-javascript" target="_blank">tutorial</a>. Two web.config settings and two more <span style="font-family: 'Courier New';">&lt;link&gt;</span> elements to include necessary JavaScript files in <span style="font-family: 'Courier New';">_Layout.cshtml</span> and field/form validation moves from server-side down to client-side to provide feedback without having to HTTP POST the form to the server then getting the validation messages sent back to the client browser.<br /><h2>  Menu Tabs and Lists</h2><a href="http://lh6.ggpht.com/-1ptIEgFThOs/Txwk89QCI9I/AAAAAAAAAvI/GlgsJdBKdlM/s1600-h/Simple%252520Circles%252520-%252520Tabbed%252520Menu%25255B3%25255D.png"><img align="right" alt="Simple Circles - Tabbed Menu" border="0" height="72" src="http://lh3.ggpht.com/-g6kqByqhDpM/Txwk9E3G4tI/AAAAAAAAAvQ/Fzp2aoiV7y4/Simple%252520Circles%252520-%252520Tabbed%252520Menu_thumb%25255B1%25255D.png?imgmax=800" style="background-image: none; border-bottom-width: 0px; border-left-width: 0px; border-right-width: 0px; border-top-width: 0px; display: inline; float: right; margin: 0px 0px 0px 3px; padding-left: 0px; padding-right: 0px; padding-top: 0px;" title="Simple Circles - Tabbed Menu" width="177" /></a>Once again I’m turning to the ASP.NET team’s tutorials to improve the user experience even more. Their <a href="http://www.asp.net/mvc/tutorials/contact-manager/iteration-2-make-the-application-look-nice-cs" target="_blank">Iteration #2 – Make the application look nice</a> article contains two enhancements; one improves the menu tabs by rounding the corners and providing highlighting to indicate the selected tab the user is on and the other replaces the textual hyperlinks on each row with graphics for edit and delete. <a href="http://lh3.ggpht.com/-_DrTU7fUfi8/Txwk9dedIVI/AAAAAAAAAvY/wtVbFxKAq6k/s1600-h/Simple%252520Circles%252520-%252520Nicer%252520Lists%25255B3%25255D.png"><img align="right" alt="Simple Circles - Nicer Lists" border="0" height="195" src="http://lh5.ggpht.com/-TMHnkd8NNh8/Txwk9gCWBxI/AAAAAAAAAvg/9d6-44R8SKg/Simple%252520Circles%252520-%252520Nicer%252520Lists_thumb%25255B1%25255D.png?imgmax=800" style="background-image: none; border-bottom-width: 0px; border-left-width: 0px; border-right-width: 0px; border-top-width: 0px; display: inline; float: right; padding-left: 0px; padding-right: 0px; padding-top: 0px;" title="Simple Circles - Nicer Lists" width="145" /></a>Again, rather than duplicating details here, please refer to the article for more information. The result of these efforts is shown on the right.<br /><br />The source code for this article can be downloaded from <a href="http://simplecircles.codeplex.com/SourceControl/changeset/changes/ab14df6388a6" target="_blank">here</a>. The next several installments will flesh out concrete implementations of the repository using Entity Framework and NHibernate.</div>
