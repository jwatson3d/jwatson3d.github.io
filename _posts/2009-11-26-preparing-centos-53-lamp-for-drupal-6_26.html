---
layout: post
title: Preparing CentOS 5.3 (LAMP) for Drupal 6 – Part 2
date: '2009-11-26T23:01:00.000-05:00'
author: John
tags:
- Linux
- Drupal
- OSS
modified_time: '2010-09-04T10:50:33.787-04:00'
thumbnail: http://lh6.ggpht.com/_BvH8o_BvG-4/TIJconj1qII/AAAAAAAAACQ/NvKyhYI4d3o/s72-c/phpinfo_header_thumb2.png?imgmax=800
blogger_id: tag:blogger.com,1999:blog-2811308028656623966.post-5318369433327418608
blogger_orig_url: http://pragmatic-software.blogspot.com/2009/11/preparing-centos-53-lamp-for-drupal-6_26.html
---

<div style="padding-bottom: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; float: none; padding-top: 0px" id="scid:0767317B-992E-4b12-91E0-4F059A8CECA8:92b2fb37-a423-45bb-8990-43e68afd1eb2" class="wlWriterEditableSmartContent">Technorati Tags: <a href="http://technorati.com/tags/drupal" rel="tag">drupal</a>,<a href="http://technorati.com/tags/centos" rel="tag">centos</a>,<a href="http://technorati.com/tags/lamp" rel="tag">lamp</a>,<a href="http://technorati.com/tags/php" rel="tag">php</a></div> <p>In the <a href="http://pragmaticenthusiast/archive/2009/11/25/preparing-centos-5.3-lamp-for-drupal-6.aspx" target="_blank">first</a> article, I covered the basic steps for preparing a CentOS 5.3 installation for Drupal 6 by installing and configuring MySQL. This article covers the last quartet of the LAMP stack – PHP as well as initial installation of Drupal 6.</p> <p>From a terminal console use the ‘yum’ utility to install the necessary PHP components:</p> <blockquote> <p><font face="Courier New">yum install php-mysql php-gd php-imap php-ldap php-odbc php-pear php-xml php-xmlrpc</font></p></blockquote> <p>Next it’s helpful and common practice to create a <a href="http://php.net/manual/en/function.phpinfo.php" target="_blank">PHP informational page</a> to verify its installation using the Gnome text editor:</p> <blockquote> <p><font face="Courier New">gedit /var/www/html/phpinfo.php</font></p></blockquote> <p>Paste or type the following then save and exit:</p> <blockquote> <p><font face="Courier New">&lt;?php </font></p> <p><font face="Courier New">// Show all information, defaults to INFO_ALL <br>phpinfo(); </font></p> <p><font face="Courier New">// Show just the module information. <br>// phpinfo(8) yields identical results. <br>phpinfo(INFO_MODULES); </font></p> <p><font face="Courier New">?&gt;</font></p></blockquote> <p>Display the PHP information using the browser:</p> <p><a href="http://lh5.ggpht.com/_BvH8o_BvG-4/TIJcnmXIWOI/AAAAAAAAACM/e9Y_JLJxJpQ/s1600-h/phpinfo_header4.png"><img style="border-right-width: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px" title="phpinfo_header" border="0" alt="phpinfo_header" src="http://lh6.ggpht.com/_BvH8o_BvG-4/TIJconj1qII/AAAAAAAAACQ/NvKyhYI4d3o/phpinfo_header_thumb2.png?imgmax=800" width="349" height="183"></a> </p> <p>Scroll further down to verify that the Apache URL rewriting module is loaded:</p> <p><a href="http://lh4.ggpht.com/_BvH8o_BvG-4/TIJco90yKRI/AAAAAAAAACU/BYBsH8OPjko/s1600-h/phpinfo_modrewrite3.png"><img style="border-right-width: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px" title="phpinfo_modrewrite" border="0" alt="phpinfo_modrewrite" src="http://lh4.ggpht.com/_BvH8o_BvG-4/TIJcqP41qAI/AAAAAAAAACY/vQtl0Z4pek0/phpinfo_modrewrite_thumb1.png?imgmax=800" width="351" height="284"></a> </p> <p>This will be useful later for what is known in Drupal as “clean URLs”. </p> <p>Implicit in the above instructions is the fact that the default location for the Apache web server document root folder is <font face="Courier New">/var/www/html</font> which means placing web files and folders under there makes them automatically served up by Apache and accessible via a web browser with no other special configuration. However, a common alternate approach is to create a separate Unix user account per installed application so that permissions and configuration settings are easily isolated to that account. This approach also facilitates remote development because it’s simpler and easier when enabling FTP access since Unix accounts typically have full access to their “home” directories. Doing it this way means a couple of extra steps when initially setting up the Drupal website but saves a <em>ton</em> of headaches in the future trying to enable access to the machine-wide directories under <font face="Courier New">/var</font>.</p> <p>Earlier we created a MySQL <em>database account</em> called ‘drupal614’ (reflecting the current released version of Drupal). If you haven’t done so already, we’ll next create a <em>Unix account</em> with the same name:</p> <blockquote> <p><font face="Courier New">useradd drupal614</font></p> <p><font face="Courier New">passwd drupal614</font></p></blockquote> <p>After logging in as this new user, browse to the Drupal <a href="http://drupal.org/project/drupal" target="_blank">website</a> and download the latest 6.x released version. Use the Nautilus file manager to open the .tar.gz file and extract it under the user’s home directory. Planning ahead for managing several versions, I chose to create a separate folder to hold websites (e.g. <font face="Courier New">/home/drupal614/www/</font>) so the full path becomes <font face="Courier New">/home/drupal614/www/drupal-6.14</font>.</p> <p>At this point, we need to configure Apache to expose the Drupal directory by editing the httpd.conf file and adding entries:</p> <blockquote> <p><font face="Courier New">gedit /etc/httpd/conf/httpd.conf</font></p></blockquote> <p>First we create an alias to the actual physical location on disk then we allow settings there to override the default settings for Apache by placing the following into the file at the end:</p> <p><a href="http://lh3.ggpht.com/_BvH8o_BvG-4/TIJcqViL-3I/AAAAAAAAACc/Xas40BT6jPk/s1600-h/drupal_install_3cleanurls14.png"><img style="border-right-width: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px" title="drupal_install_3-cleanurls1" border="0" alt="drupal_install_3-cleanurls1" src="http://lh5.ggpht.com/_BvH8o_BvG-4/TIJcrKtqqyI/AAAAAAAAACg/Ln3QByjxGPc/drupal_install_3cleanurls1_thumb2.png?imgmax=800" width="390" height="229"></a> </p> <p>Next we edit the .htaccess file in the root of the Drupal install directory – uncomment the RewriteBase instruction and set the path to the alias we specified above in the httpd.conf file:</p> <p><a href="http://lh5.ggpht.com/_BvH8o_BvG-4/TIJcrtIAw0I/AAAAAAAAACk/YmNJ9b6PYFs/s1600-h/drupal_install_3cleanurls23.png"><img style="border-right-width: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px" title="drupal_install_3-cleanurls2" border="0" alt="drupal_install_3-cleanurls2" src="http://lh3.ggpht.com/_BvH8o_BvG-4/TIJcrxUZ8ZI/AAAAAAAAACo/MFsfjpy13Mc/drupal_install_3cleanurls2_thumb1.png?imgmax=800" width="316" height="367"></a> </p> <p>Now we should be able to follow the steps to grant write permissions outlined in the <a href="http://drupal.org/getting-started/6/install/set-permissions" target="_blank">install guide</a> then open a browser and navigate to the install page:</p> <p><a href="http://localhost/drupal614/install.php">http://localhost/drupal614/install.php</a></p> <p>You should see the initial page to choose a language:</p> <p><a href="http://lh6.ggpht.com/_BvH8o_BvG-4/TIJcsOnvbKI/AAAAAAAAACs/BsJFhlL8f_Q/s1600-h/drupal_install_1language4.png"><img style="border-right-width: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px" title="drupal_install_1-language" border="0" alt="drupal_install_1-language" src="http://lh6.ggpht.com/_BvH8o_BvG-4/TIJctKnjPvI/AAAAAAAAACw/3RKQ91V00aA/drupal_install_1language_thumb2.png?imgmax=800" width="362" height="322"></a> </p> <p>The next page is where you’ll put in the database configuration information we had previously setup:</p> <p><a href="http://lh4.ggpht.com/_BvH8o_BvG-4/TIJcteIEm5I/AAAAAAAAAC0/REtL1aI07LM/s1600-h/drupal_install_2database3.png"><img style="border-right-width: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px" title="drupal_install_2-database" border="0" alt="drupal_install_2-database" src="http://lh5.ggpht.com/_BvH8o_BvG-4/TIJctsngSoI/AAAAAAAAAC4/KiWximhCYw4/drupal_install_2database_thumb1.png?imgmax=800" width="362" height="270"></a> </p> <p>After setup is complete it is generally recommended to go into <font face="Courier New">admin/settings/clean-urls</font> and enable them if not already enabled:</p> <p><a href="http://lh4.ggpht.com/_BvH8o_BvG-4/TIJct0dKlfI/AAAAAAAAAC8/yp6XHZUME_U/s1600-h/drupal_install_3cleanurls34.png"><img style="border-right-width: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px" title="drupal_install_3-cleanurls3" border="0" alt="drupal_install_3-cleanurls3" src="http://lh3.ggpht.com/_BvH8o_BvG-4/TIJcuD1goAI/AAAAAAAAADA/NH2SmR77yB0/drupal_install_3cleanurls3_thumb2.png?imgmax=800" width="371" height="263"></a> </p> <p></p> <p>At this point we have an installed and working version of Drupal! Subsequent posts will cover installation and configuration of various modules to achieve the level of functionality required for a high quality community site.</p>  