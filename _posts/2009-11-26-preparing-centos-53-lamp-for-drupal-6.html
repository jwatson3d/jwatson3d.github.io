---

title: Preparing CentOS 5.3 (LAMP) for Drupal 6
date: '2009-11-26T17:57:00.000-05:00'
author: John
tags:
- Linux
- Drupal
- OSS
modified_time: '2010-09-04T10:36:28.017-04:00'
blogger_id: tag:blogger.com,1999:blog-2811308028656623966.post-469462100797047327
blogger_orig_url: http://pragmatic-software.blogspot.com/2009/11/preparing-centos-53-lamp-for-drupal-6.html
---

<p>Having just embarked on a side project to build a community website using Drupal 6 I decided to capture the steps both for documentation purposes and to help others who may seek to do the same. To begin with, <a href="http://centos.org/" target="_blank">CentOS</a> is short for Community ENTerprise Operating System and is “an Enterprise-class Linux Distribution derived from sources freely provided to the public by a prominent North American Enterprise Linux vendor.” In other words this open source project takes the GPL-released RedHat sources and compiles them along with free, open source replacements for RedHat’s proprietary portions. Within the business community, it is widely popular because it is “just like” (just as good as?) the commercial version it is based upon.</p> <p>On numerous occasions I have installed versions of CentOS on Microsoft’s Virtual PC and Hyper-V products as well as <a href="http://www.vmware.com/products/workstation/" target="_blank">VMWare’s Workstation</a>. In my opinion, it is far easier with VMWare’s built-in support however their workstation product costs around $180 whereas the Microsoft products are “free” with corresponding Windows licenses. Note however that VMWare Workstation is only necessary to initially <strong><em>build</em></strong> a new virtual machine instance. Once you have the guest OS installed, you can use their free <a href="http://www.vmware.com/products/player/" target="_blank">VMWare Player</a> to <strong><em>run</em></strong> the virtual machines. VMWare has a great program of “appliances” which are pre-built, pre-configured virtual machines ready for download and operation. In fact, there’s a <a href="http://www.vmware.com/appliances/directory/108243" target="_blank">CentOS 5.3 appliance</a> ready to go – you just need to download then install VMWare Player and download the appliance and you’re up and running.</p> <p>The Apache web server is already installed in the appliance and when you choose “server” if performing your own install. That leaves MySQL and PHP along with some configuration. Begin with MySQL by opening a terminal window (right-click on the desktop) and switching to the built-in root user (a.k.a. superuser):</p> <blockquote> <p><font face="Courier New">su -</font></p> <p><font face="Courier New">yum install mysql mysql-server</font></p></blockquote> <p>Once MySQL is installed enable it for autostart using:</p> <blockquote> <p><font face="Courier New">chkconfig –levels 235 mysqld on</font></p></blockquote> <p>then start it manually this first time using:</p> <blockquote> <p><font face="Courier New">/etc/init.d/mysqld start</font></p></blockquote> <p>Set the MySQL database login for root:</p> <blockquote> <p><font face="Courier New">mysqladmin –u root password ‘PASSWORD-GOES-HERE’</font></p></blockquote> <p>Next log into the MySQL command processor and set the database name to use for subsequent commands:</p> <blockquote> <p><font face="Courier New">mysql –u root –p</font></p> <p><font face="Courier New">mysql&gt; USE mysql; <br>Reading table information for completion of table and column names <br>You can turn off this feature to get a quicker startup with -A </font></p> <p><font face="Courier New">Database changed</font></p></blockquote> <p>At this point there’s some housekeeping that’s usually done to secure the database beginning with removing the anonymous accounts that let any connection to the database to happen.</p> <blockquote> <p><font face="Courier New">mysql&gt; DELETE FROM user WHERE User = '';</font></p> <p><font face="Courier New">mysql&gt; FLUSH PRIVILEGES;</font></p></blockquote> <p>Now look at the remaining contents of the user table:</p> <blockquote> <p><font face="Courier New">mysql&gt; select Host,User,Password from user; <br>+-----------------------+------+------------------+ <br>| Host&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | User | Password&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | <br>+-----------------------+------+------------------+ <br>| localhost&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | root | 44d0372963d3fb50 | <br>| localhost.localdomain | root |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | <br>| 127.0.0.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | root |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | <br>+-----------------------+------+------------------+ <br>3 rows in set (0.00 sec)</font></p></blockquote> <p>Note that the Password column contains a hashed (encrypted) value. To exit the MySQL command processor and return to the Linux shell use ‘quit;’&nbsp; or ‘\q’:</p> <blockquote> <p><font face="Courier New">mysql&gt; quit; <br>Bye</font></p></blockquote> <p>Create a separate database login for a Drupal user (e.g. drupal614):</p> <blockquote> <p><font face="Courier New">mysqladmin –u root –p create drupal614</font></p></blockquote> <p>This database account will be used to connect to MySQL and will “own” the tables and other artifacts created to support Drupal. Rather than using the separate mysqladmin from the Linux shell you can accomplish the same thing from within the MySQL command processor before quitting:</p> <blockquote> <p><font face="Courier New">mysql&gt; CREATE USER 'drupal614'@'localhost' IDENTIFIED BY 'drupal614'; <br>Query OK, 0 rows affected (0.00 sec) </font></p> <p><font face="Courier New">mysql&gt; GRANT ALL PRIVILEGES ON *.* TO 'drupal614'@'localhost' WITH GRANT OPTION; <br>Query OK, 0 rows affected (0.01 sec) </font></p> <p><font face="Courier New">mysql&gt; CREATE USER 'drupal614'@'%' IDENTIFIED BY 'drupal614'; <br>Query OK, 0 rows affected (0.00 sec) </font></p> <p><font face="Courier New">mysql&gt; GRANT ALL PRIVILEGES ON *.* TO 'john'@'%' WITH GRANT OPTION; <br>Query OK, 0 rows affected (0.00 sec) </font></p> <p><font face="Courier New">mysql&gt; flush privileges; <br>Query OK, 0 rows affected (0.00 sec) </font></p> <p><font face="Courier New">mysql&gt; quit; <br>Bye</font></p></blockquote> <p>The above commands will create two database accounts – one for connecting from <em>within</em> the Linux machine and the second set for connecting <em>to</em> the Linux machine <em>from another</em>. This second account is useful if you wish to connect say from your Windows machine using a free utility such as <a href="http://www.dbvis.com/" target="_blank">DbVisualizer</a> or <a href="http://squirrel-sql.sourceforge.net/" target="_blank">SQuirreL SQL</a>. The GRANT command is a lazy bit of a cheat in that it grants all permissions to the drupal614 account. Looking at the Drupal installation guide you’ll find a longer syntax which only grants the specific permissions that Drupal needs to connect and use the MySQL database.</p> <p>This has been a quick whirlwind tour of the essential steps. I have only tried this twice – first as a trial and error practice and again using a fresh machine to validate that I had the specific steps worked out.</p> <p>Next up will be the steps for installing PHP and Drupal.</p>  